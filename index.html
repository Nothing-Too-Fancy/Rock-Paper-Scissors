<!DOCTYPE html>
<html>
    <body>
        <div class='buttons'>
            <button class='rock'>Rock</button>
            <button class='paper'>Paper</button> 
            <button class='scissors'>Scissors</button>
        </div>
        <div class='results'></div>

    </body>
    <script>
        const rock = 'Rock';
        const paper = 'Paper';
        const scissors = 'Scissors';

        const buttons = document.querySelectorAll('button');
        const btnArray = [...buttons];

        btnArray.forEach(btn => btn.addEventListener('click', 
                function(){playRound(btn.textContent, computerPlay()); }));

        function displayResults(message){
            const results = document.querySelector('.results');
            results.textContent = message;
        }

        function computerPlay() {
            let random = Math.floor(Math.random() * 15);
            
            if(random >= 0 && random <= 4)
                return rock;
            else if (random >= 5 && random <= 9)
                return paper;
            else if (random >= 10 && random <= 14)
                return scissors;
        }

        function playRound(playerSelection, computerSelection){

            playerSelection = capitalize(playerSelection);
            computerSelection = capitalize(computerSelection);

            switch(playerSelection){
                case rock:
                    switch(computerSelection){
                        case paper:
                            displayResults(youLose(computerSelection, playerSelection));
                        break;
                        case scissors:
                            displayResults(youWin(playerSelection, computerSelection));
                        break;
                        case rock:
                            displayResults('It\'s a tie!');
                        break;
                        default:
                            displayResults(': invalid Computer selection. Please try again.');
                    }
                break;
                case paper:
                    switch(computerSelection){
                        case scissors:
                            displayResults(youLose(computerSelection, playerSelection));
                        break;
                        case rock:
                            displayResults(youWin(playerSelection, computerSelection));
                        break;
                        case paper:
                            displayResults('It\'s a tie!');
                        break;
                        default:
                            displayResults('invalid Computer selection. Please try again.');
                    }
                break;
                case scissors:
                    switch(computerSelection){
                        case rock:
                            displayResults(youLose(computerSelection, playerSelection));
                        break;
                        case paper:
                            displayResults(youWin(playerSelection, computerSelection));
                        break;
                        case scissors:
                            displayResults('It\'s a tie!');
                        break;
                        default:
                            displayResults('invalid Computer selection. Please try again.');
                    }
                break;
                default:
                    displayResults('invalid Player selection. Please try again.');
            }
        }

        function game(numOfRounds){
            let playerWins = 0;
            let computerWins = 0;
            for(let i = 0; i < numOfRounds; i++){
                let winner = playRound(playerSelection, computerPlay());
                displayResults(winner);
                if (winner[4] == 'W') playerWins++;
                else if(winner[4] == 'L') computerWins++;
            }
            displayResults('Player: ' + playerWins + '  Computer: ' + computerWins);
            while(playerWins == computerWins){
                displayResults('All tied up. Playing sudden death game...');
                let winner = playRound('Rock', computerPlay());
                displayResults(winner);
                if (winner[4] == 'W') playerWins++;
                else if(winner[4] == 'L') computerWins++;
                displayResults('Player: ' + playerWins + '  Computer: ' + computerWins);
            }
            displayResults(playerWins > computerWins ? 'You win!' : 'You lose!');
        }

        function capitalize(str){
            let firstLetter = str[0].toUpperCase();
            let theRest = str.substring(1, str.length);
            theRest = theRest.toLowerCase();
            return firstLetter + theRest;
        }

        function youLose(winner, loser){
            return 'You Lose! ' + winner + ' beats ' + loser;
        }

        function youWin(winner, loser){
            return 'You Win! ' + winner + ' beats ' + loser; 
        }

    </script>
</html>